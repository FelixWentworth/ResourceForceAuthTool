{"version":3,"sources":["modules/story/components/character-selection-editor/story-character-selection-editor.component.js"],"names":["angular","module","component","templateUrl","bindings","selectedCharacters","selectableCharacters","minimumCharacters","controller","ctrl","toggleSelected","character","Array","contains","__selected","remove","push","updateValidity","$onInit","forEach","removeWhere","c","name","selectedCharacter","insert","$postLink","form","$setValidity","length"],"mappings":";;AAAAA,QACEC,MADF,CACS,OADT,EAEEC,SAFF,CAEY,+BAFZ,EAE6C;AAC3CC,cAAa,2FAD8B;AAE3CC,WAAU;AACTC,sBAAoB,GADX;AAETC,wBAAsB,GAFb;AAGTC,qBAAmB;AAHV,EAFiC;AAO3CC,aAAY,sBAAW;AACtB,MAAIC,OAAO,IAAX;;AAEA;AACAA,OAAKC,cAAL,GAAsB,UAASC,SAAT,EAAoB;AACzC,OAAGC,MAAMC,QAAN,CAAeJ,KAAKJ,kBAApB,EAAwCM,SAAxC,CAAH,EAAuD;AACtDA,cAAUG,UAAV,GAAuB,KAAvB;AACAF,UAAMG,MAAN,CAAaN,KAAKJ,kBAAlB,EAAsCM,SAAtC;AACA,IAHD,MAGO;AACNA,cAAUG,UAAV,GAAuB,IAAvB;AACAL,SAAKJ,kBAAL,CAAwBW,IAAxB,CAA6BL,SAA7B;AACA;;AAEDM;AACA,GAVD;;AAYAR,OAAKS,OAAL,GAAe,YAAY;AAC1BT,QAAKJ,kBAAL,CAAwBc,OAAxB,CAAgC,6BAAqB;;AAEpDP,UAAMQ,WAAN,CAAkBX,KAAKH,oBAAvB,EAA6C;AAAA,YAAKe,EAAEC,IAAF,IAAUC,kBAAkBD,IAAjC;AAAA,KAA7C;AACAV,UAAMY,MAAN,CAAaf,KAAKH,oBAAlB,EAAwC,CAAxC,EAA2CiB,iBAA3C;AACAA,sBAAkBT,UAAlB,GAA+B,IAA/B;AACA,IALD;AAMA,GAPD;;AASAL,OAAKgB,SAAL,GAAiB,YAAY;AAC5BR;AACA,GAFD;;AAIA;AACA,WAASA,cAAT,GAA0B;AACzBR,QAAKiB,IAAL,CAAUC,YAAV,CAAuB,mBAAvB,EAA4ClB,KAAKJ,kBAAL,CAAwBuB,MAAxB,IAAkCnB,KAAKF,iBAAnF;AACA;AACD;AAxC0C,CAF7C","file":"story-character-selection-editor.component.js","sourcesContent":["angular\r\n\t.module(\"story\")\r\n\t.component(\"storyCharacterSelectionEditor\", {\r\n\t\ttemplateUrl: \"modules/story/components/character-selection-editor/story-character-selection-editor.html\",\r\n\t\tbindings: {\r\n\t\t\tselectedCharacters: \"=\",\r\n\t\t\tselectableCharacters: \"<\",\r\n\t\t\tminimumCharacters: \"<\"\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\t\t\tvar ctrl = this;\r\n\r\n\t\t\t// public methods\r\n\t\t\tctrl.toggleSelected = function(character) {\r\n\t\t\t\tif(Array.contains(ctrl.selectedCharacters, character)) {\r\n\t\t\t\t\tcharacter.__selected = false;\r\n\t\t\t\t\tArray.remove(ctrl.selectedCharacters, character);\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcharacter.__selected = true;\r\n\t\t\t\t\tctrl.selectedCharacters.push(character);\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateValidity();\r\n\t\t\t};\r\n\r\n\t\t\tctrl.$onInit = function () {\r\n\t\t\t\tctrl.selectedCharacters.forEach(selectedCharacter => {\r\n\r\n\t\t\t\t\tArray.removeWhere(ctrl.selectableCharacters, c => c.name == selectedCharacter.name);\r\n\t\t\t\t\tArray.insert(ctrl.selectableCharacters, 0, selectedCharacter);\r\n\t\t\t\t\tselectedCharacter.__selected = true;\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tctrl.$postLink = function () {\r\n\t\t\t\tupdateValidity();\r\n\t\t\t};\r\n\r\n\t\t\t// private methods\r\n\t\t\tfunction updateValidity() {\r\n\t\t\t\tctrl.form.$setValidity(\"minimumCharacters\", ctrl.selectedCharacters.length >= ctrl.minimumCharacters);\r\n\t\t\t}\r\n\t\t}\r\n\t});"]}