{"version":3,"sources":["modules/story/components/tree-editor/story-tree-editor.component.js"],"names":["angular","module","component","templateUrl","bindings","story","controller","StoryEditorService","StoryStorageService","ctrl","config","characters","minimum","all","createCharacter","invalidMessage","save","onCharacterSelectionChanged","pruneRemovedCharacters","$onInit","setStory","name","character","Character","elements","push","Emotion"],"mappings":";;AAAAA,QACEC,MADF,CACS,OADT,EAEEC,SAFF,CAEY,iBAFZ,EAE+B;AAC7BC,cAAa,6DADgB;AAE7BC,WAAU;AACTC,SAAO;AADE,EAFmB;AAK7BC,aAAY,CAAC,oBAAD,EAAuB,qBAAvB,EAA8C,UAAUC,kBAAV,EAA8BC,mBAA9B,EAAmD;AAC5G,MAAIC,OAAO,IAAX;;AAEA;AACA;AACAA,OAAKC,MAAL,GAAc,EAAd;AACAD,OAAKC,MAAL,CAAYC,UAAZ,GAAyB,EAAzB;AACAF,OAAKC,MAAL,CAAYC,UAAZ,CAAuBC,OAAvB,GAAiC,CAAjC;AACAH,OAAKC,MAAL,CAAYC,UAAZ,CAAuBE,GAAvB,GAA6B,CAC5BC,gBAAgB,KAAhB,CAD4B,EAE5BA,gBAAgB,KAAhB,CAF4B,EAG5BA,gBAAgB,IAAhB,CAH4B,EAI5BA,gBAAgB,QAAhB,CAJ4B,EAK5BA,gBAAgB,OAAhB,CAL4B,CAA7B;AAOAL,OAAKC,MAAL,CAAYK,cAAZ,GAA6B,qDAC1B,kDAD0B,GAE1B,iEAFH;;AAIA;AACAN,OAAKO,IAAL,GAAY,YAAW;AACtBR,uBAAoBQ,IAApB,CAAyBP,KAAKJ,KAA9B;AACA,GAFD;;AAIAI,OAAKQ,2BAAL,GAAmC,YAAY;AAC9CT,uBAAoBU,sBAApB;AACA,GAFD;;AAIAT,OAAKU,OAAL,GAAe,YAAW;AACzBZ,sBAAmBa,QAAnB,CAA4BX,KAAKJ,KAAjC;AACA,GAFD;;AAIA;AACA,WAASS,eAAT,CAAyBO,IAAzB,EAA+B;AAC9B,OAAIC,YAAY,IAAIC,SAAJ,CAAcF,IAAd,CAAhB;AACAC,aAAUE,QAAV,CAAmBC,IAAnB,CAAwB,IAAIC,OAAJ,CAAY,SAAZ,CAAxB;;AAEA,UAAOJ,SAAP;AACA;AACD,EAvCW;AALiB,CAF/B","file":"story-tree-editor.component.js","sourcesContent":["angular\r\n\t.module(\"story\")\r\n\t.component(\"storyTreeEditor\", {\t\t\r\n\t\ttemplateUrl: \"modules/story/components/tree-editor/story-tree-editor.html\",\r\n\t\tbindings: {\r\n\t\t\tstory: \"<\"\r\n\t\t},\r\n\t\tcontroller: [\"StoryEditorService\", \"StoryStorageService\", function (StoryEditorService, StoryStorageService) {\r\n\t\t\tvar ctrl = this;\r\n\r\n\t\t\t// public fields\r\n\t\t\t// todo make data driven\r\n\t\t\tctrl.config = {};\r\n\t\t\tctrl.config.characters = {};\r\n\t\t\tctrl.config.characters.minimum = 2;\r\n\t\t\tctrl.config.characters.all = [\r\n\t\t\t\tcreateCharacter(\"Bob\"), \r\n\t\t\t\tcreateCharacter(\"Sue\"),\r\n\t\t\t\tcreateCharacter(\"Mo\"),\r\n\t\t\t\tcreateCharacter(\"Hannah\"),\r\n\t\t\t\tcreateCharacter(\"Frank\"),\r\n\t\t\t];\r\n\t\t\tctrl.config.invalidMessage = \"There seems to be an invalid part of your story.\" + \r\n\t\t\t\t\t\t\" \\nYou must find it and fix it in order to save.\" +\r\n\t\t\t\t\t\t\" \\nThere should be a red error message to help you identify it.\";\r\n\r\n\t\t\t// public methods\r\n\t\t\tctrl.save = function() {\r\n\t\t\t\tStoryStorageService.save(ctrl.story);\r\n\t\t\t};\r\n\r\n\t\t\tctrl.onCharacterSelectionChanged = function () {\r\n\t\t\t\tStoryStorageService.pruneRemovedCharacters();\t\r\n\t\t\t};\r\n\r\n\t\t\tctrl.$onInit = function() {\r\n\t\t\t\tStoryEditorService.setStory(ctrl.story);\r\n\t\t\t};\r\n\r\n\t\t\t// private methods\r\n\t\t\tfunction createCharacter(name) {\r\n\t\t\t\tvar character = new Character(name);\r\n\t\t\t\tcharacter.elements.push(new Emotion(\"neutral\"));\r\n\r\n\t\t\t\treturn character;\r\n\t\t\t};\r\n\t\t}]\r\n\t});"]}